diff -Nru CMakeLists.txt CMakeLists.txt
--- CMakeLists.txt	1970-01-01 01:00:00.000000000 +0100
+++ CMakeLists.txt	2022-03-03 13:16:39.992694600 +0100
@@ -0,0 +1,75 @@
+# Helper cmake for Windows
+# the default libjpeg build for Windows (see makefile.vc)
+# only builds a static library. Because the jpeg functions 
+# aren't marked with __declspec(export) it is easiest
+# to use cmake and set the WINDOWS_EXPORT_ALL_SYMBOLS property
+# to create a DLL with all symbols exported and a implib (.lib)
+# that can be linked against.
+# This way we can also easily provide package configs for use
+# with other projects.
+
+cmake_minimum_required (VERSION 3.4)
+project (libjpeg VERSION 9)
+
+include(GNUInstallDirs)
+
+set(JPEG_SRC jaricom.c jcapimin.c jcapistd.c jcarith.c jccoefct.c jccolor.c 
+        jcdctmgr.c jchuff.c jcinit.c jcmainct.c jcmarker.c jcmaster.c 
+        jcomapi.c jcparam.c jcprepct.c jcsample.c jctrans.c jdapimin.c 
+        jdapistd.c jdarith.c jdatadst.c jdatasrc.c jdcoefct.c jdcolor.c 
+        jddctmgr.c jdhuff.c jdinput.c jdmainct.c jdmarker.c jdmaster.c 
+        jdmerge.c jdpostct.c jdsample.c jdtrans.c jerror.c jfdctflt.c 
+        jfdctfst.c jfdctint.c jidctflt.c jidctfst.c jidctint.c jquant1.c 
+        jquant2.c jutils.c jmemmgr.c jmemansi.c)
+add_library (libjpeg SHARED ${JPEG_SRC})
+
+target_include_directories (libjpeg PUBLIC
+  $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}>
+  $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>)
+
+set_target_properties(libjpeg PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
+add_definitions(-D_CRT_SECURE_NO_WARNINGS)
+
+add_executable (cjpeg cjpeg.c rdppm.c rdgif.c rdtarga.c rdrle.c rdbmp.c rdswitch.c cdjpeg.c)
+target_link_libraries (cjpeg libjpeg)
+add_executable (djpeg djpeg.c wrppm.c wrgif.c wrtarga.c wrrle.c wrbmp.c rdcolmap.c cdjpeg.c)
+target_link_libraries (djpeg libjpeg)
+add_executable (jpegtran jpegtran.c rdswitch.c cdjpeg.c transupp.c)
+target_link_libraries (jpegtran libjpeg)
+add_executable (rdjpgcom rdjpgcom.c)
+target_link_libraries (rdjpgcom libjpeg)
+add_executable (wrjpgcom wrjpgcom.c)
+target_link_libraries (wrjpgcom libjpeg)
+
+add_library(jpeg STATIC ${JPEG_SRC})
+
+set(TARGETS_EXPORT_NAME "${PROJECT_NAME}Targets")
+
+install(TARGETS libjpeg cjpeg djpeg jpegtran rdjpgcom wrjpgcom jpeg
+  EXPORT ${TARGETS_EXPORT_NAME}
+  RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+  LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+  ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}")
+
+install(FILES jpeglib.h jconfig.h jmorecfg.h jerror.h jpegint.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}")  
+
+
+include(CMakePackageConfigHelpers)
+
+set(TARGETS_FILENAME "${TARGETS_EXPORT_NAME}.cmake")	# this variable is used by cmake-config.in
+set(JPEG_CONFIG_INSTALL_DIR "${CMAKE_INSTALL_LIBDIR}/cmake/${PROJECT_NAME}")
+set(JPEG_PROJECT_CONFIG "${PROJECT_BINARY_DIR}/${PROJECT_NAME}Config.cmake")
+set(JPEG_VERSION_CONFIG "${PROJECT_BINARY_DIR}/${PROJECT_NAME}ConfigVersion.cmake")
+set(JPEG_TARGETS_CONFIG "${PROJECT_BINARY_DIR}/${TARGETS_FILENAME}")
+configure_package_config_file("${PROJECT_SOURCE_DIR}/cmake-config.in" "${JPEG_PROJECT_CONFIG}"
+  INSTALL_DESTINATION "${JPEG_CONFIG_INSTALL_DIR}")
+write_basic_package_version_file("${JPEG_VERSION_CONFIG}"
+  VERSION ${PROJECT_VERSION}
+  COMPATIBILITY SameMajorVersion)
+export(EXPORT ${TARGETS_EXPORT_NAME}
+  FILE ${JPEG_TARGETS_CONFIG})
+
+install(FILES ${JPEG_PROJECT_CONFIG} ${JPEG_VERSION_CONFIG}
+  DESTINATION ${JPEG_CONFIG_INSTALL_DIR})
+install(EXPORT ${TARGETS_EXPORT_NAME}
+  DESTINATION ${JPEG_CONFIG_INSTALL_DIR})
diff -Nru cmake-config.in cmake-config.in
--- cmake-config.in	1970-01-01 01:00:00.000000000 +0100
+++ cmake-config.in	2022-03-03 11:05:12.176933700 +0100
@@ -0,0 +1,4 @@
+@PACKAGE_INIT@
+
+include("${CMAKE_CURRENT_LIST_DIR}/@TARGETS_FILENAME@")
+check_required_components("@PROJECT_NAME@")
